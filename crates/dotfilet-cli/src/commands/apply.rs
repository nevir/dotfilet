use clap::Parser;

#[derive(Parser)]
#[command(about = "Apply configuration changes to the system")]
pub struct ApplyCommand {
    #[arg(help = "Specific resources to apply")]
    pub resources: Vec<String>,

    #[arg(long, help = "Use a plan file generated by diff")]
    pub plan: Option<String>,
}

impl ApplyCommand {
    pub fn execute(self) {
        match (self.resources.is_empty(), self.plan) {
            (true, None) => {
                println!("dotfilet apply: Not yet implemented");
                println!("This command will apply all configuration changes");
            }
            (false, None) => {
                println!("dotfilet apply: Not yet implemented");
                println!(
                    "This command will apply changes for: {}",
                    self.resources.join(", ")
                );
            }
            (_, Some(plan_file)) => {
                println!("dotfilet apply: Not yet implemented");
                println!(
                    "This command will apply changes from plan file: {}",
                    plan_file
                );
            }
        }
    }
}
